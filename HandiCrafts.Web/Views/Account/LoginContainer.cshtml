@model HandiCrafts.Web.Models.Account.LoginContainerModel

@{ ViewBag.Title = "ورود به سیستم"; }
@section Styles{
}

@{
    if (Model.DefaultTab == "login")
    {
        @await Html.PartialAsync("_Login.cshtml", Model.ShortLoginModel);
    }
    else if (Model.DefaultTab == "verifyCode")
    {
        @await Html.PartialAsync("_VerifyCode.cshtml", Model.AcceptCodeModel);
    }
    else if (Model.DefaultTab == "register")
    {
        @await Html.PartialAsync("_Register.cshtml", Model.RegisterModel);
    }
}


@section Scripts{
    <script>
        var defaultTab = '@Model.DefaultTab';


        // =======================================
        function onSigninBegin(e, form) {
            $('#kt_login_signin_submit').addClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', true);
        }

        function onSigninSuccess(result) {
            alert("10");

            window.location = "/Account/verifyCode";


            if (result.Success) {
                window.location = result.Data;
            }
            else {
                alert(result.Message);
            }
        }
        function onSigninFailed() {
            alert("خطا");
        }

        function onSigninComplete(re) {
            console.log(re);
        }

        failed = function (xhr) {
            alert(`Status: ${xhr.status}, Status Text: ${xhr.statusText}`);
        };


    </script>
}